import{w as b}from"./with-props-CbPP9z1L.js";import{a as y,t as j,o as e,v}from"./chunk-D4RADZKF-BJUHQB5c.js";import{u as N,F as x}from"./field-B9-6QqNw.js";import{y as u}from"./index-CW2VzeWp.js";import{R as L}from"./reactIcons-CcwffGRm.js";import{s as S}from"./authSlice-NXvFQZCo.js";import{a as E}from"./apiSlice-B5w1slPB.js";const k=E.injectEndpoints({endpoints:a=>({addLogin:a.mutation({query:s=>({url:"/accounts/admin/login/",method:"POST",body:s}),async onQueryStarted(s,{queryFulfilled:i,dispatch:o}){var l,n;try{const{data:t}=await i,r={admin:t.data.admin,tokens:{access_token:t.data.tokens.access_token,refresh_token:t.data.tokens.refresh_token}};o(S(r))}catch(t){const r=((n=(l=t==null?void 0:t.error)==null?void 0:l.data)==null?void 0:n.message)||"Login failed!";console.error("Login time error:",r)}}}),adminPasswordChange:a.mutation({query:s=>({url:"/accounts/password-change/",method:"PUT",body:s})})})}),{useAddLoginMutation:F}=k,P=()=>{const[a,s]=y.useState(!1),i=j(),{register:o,handleSubmit:l,reset:n,formState:{errors:t}}=N(),[r,{isLoading:p}]=F(),{IoMdEye:h,IoMdEyeOff:f}=L,w=async m=>{var c;try{await r(m).unwrap(),u.success("Login successfully"),i("/dashboard/"),n()}catch(d){const g=((c=d==null?void 0:d.data)==null?void 0:c.message)||"Something went wrong";u.error(g)}};return e.jsxs("form",{className:"flex flex-col flex-wrap gap-y-2.5 md:gap-y-5 mt-5 md:mt-8 w-full text-white",onSubmit:l(w),children:[e.jsx("div",{className:"flex flex-col flex-wrap gap-y-2.5 w-full",children:e.jsx(x,{label:"Enter your email",error:t.email,children:e.jsx("input",{...o("email",{required:"Email is required.",pattern:{value:/^\S+@\S+$/i,message:"Enter a valid email."},minLength:{value:10,message:"Email must be at least 10 characters."},maxLength:{value:40,message:"Email must be at most 40 characters."}}),className:"text-white placeholder:text-white text-sm md:text-base font-normal placeholder:text-sm md:placeholder:text-base placeholder:font-normal py-3 px-2.5 md:px-3.5 border border-white rounded-xl",type:"email",name:"email",id:"email",autoFocus:!0,placeholder:"Enter your email"})})}),e.jsx("div",{className:"flex flex-col flex-wrap gap-y-2.5 w-full relative",children:e.jsx(x,{label:"Enter your password",error:t.password,children:e.jsxs(e.Fragment,{children:[e.jsx("input",{...o("password",{required:"Password is required.",minLength:{value:5,message:"Password must be at least 5 characters."},maxLength:{value:15,message:"Password must be at most 15 characters."}}),className:"text-white placeholder:text-white text-sm md:text-base font-normal placeholder:text-sm md:placeholder:text-base placeholder:font-normal py-3 px-3.5 border border-white rounded-xl",type:a?"text":"password",name:"password",id:"password",placeholder:"********"}),e.jsx("button",{className:"absolute top-[58%] right-4 cursor-pointer z-50",type:"button",onClick:()=>s(m=>!m),children:a?e.jsx(f,{className:"text-lg md:text-xl"}):e.jsx(h,{className:"text-lg md:text-xl"})})]})})}),e.jsx("div",{className:"flex flex-col flex-wrap w-fit",children:e.jsx(v,{className:"text-sm md:text-base font-medium border-b-2 pb-0.5",to:"/",children:"Forgot Password"})}),e.jsx("div",{className:"flex flex-col flex-wrap w-fit",children:e.jsx("button",{className:"bg-black text-white text-sm md:text-base font-medium px-10 py-3.5 rounded-xl cursor-pointer",type:"submit",children:p?"Loading...":"Login"})})]})},O=b(function(){return e.jsx("section",{className:"relative top-0 left-0 right-0 w-full h-screen",children:e.jsx("div",{className:"max-w-screen-2xl container mx-auto px-2.5 lg:px-5 w-full h-full",children:e.jsx("div",{className:"flex flex-col flex-wrap justify-center items-center w-full h-full",children:e.jsxs("div",{className:"flex flex-col flex-wrap py-4 sm:py-5 md:py-8 px-4 sm:px-5 md:px-10 w-full md:w-2/3 lg:w-2/5 rounded-sm shadow-base login",children:[e.jsx("h2",{className:"text-white text-2xl md:text-3xl font-bold",children:"Login Form"}),e.jsx(P,{})]})})})})});export{O as default};
