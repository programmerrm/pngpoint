var qt=Object.defineProperty;var Ot=(e,t,a)=>t in e?qt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;var Ve=(e,t,a)=>Ot(e,typeof t!="symbol"?t+"":t,a);import{i as ye,n as ft,f as pt,e as Tt,g as ue,p as ze,h as We,d as ie,j as le,k as Ie,m as Ne,o as ne,q as Je,r as Ct,S as yt,t as Oe,v as xe,w as ht,x as Dt,y as gt,z as jt,A as Ge,B as _t,C as Ft,D as Ut,E as zt,u as Nt,b as xt,F as pe,s as Lt,l as Ye}from"./authSlice-NXvFQZCo.js";import{a as U}from"./chunk-D4RADZKF-BJUHQB5c.js";function $t(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function Kt(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function Ht(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(a=>typeof a=="function")){const a=e.map(y=>typeof y=="function"?`function ${y.name||"unnamed"}()`:typeof y).join(", ");throw new TypeError(`${t}[${a}]`)}}var Xe=e=>Array.isArray(e)?e:[e];function Bt(e){const t=Array.isArray(e[0])?e[0]:e;return Ht(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function Vt(e,t){const a=[],{length:y}=e;for(let p=0;p<y;p++)a.push(e[p].apply(null,t));return a}var Wt=class{constructor(e){this.value=e}deref(){return this.value}},Jt=typeof WeakRef<"u"?WeakRef:Wt,Gt=0,Ze=1;function me(){return{s:Gt,v:void 0,o:null,p:null}}function Pe(e,t={}){let a=me();const{resultEqualityCheck:y}=t;let p,I=0;function Q(){var M;let P=a;const{length:C}=arguments;for(let h=0,f=C;h<f;h++){const b=arguments[h];if(typeof b=="function"||typeof b=="object"&&b!==null){let w=P.o;w===null&&(P.o=w=new WeakMap);const R=w.get(b);R===void 0?(P=me(),w.set(b,P)):P=R}else{let w=P.p;w===null&&(P.p=w=new Map);const R=w.get(b);R===void 0?(P=me(),w.set(b,P)):P=R}}const A=P;let O;if(P.s===Ze)O=P.v;else if(O=e.apply(null,arguments),I++,y){const h=((M=p==null?void 0:p.deref)==null?void 0:M.call(p))??p;h!=null&&y(h,O)&&(O=h,I!==0&&I--),p=typeof O=="object"&&O!==null||typeof O=="function"?new Jt(O):O}return A.s=Ze,A.v=O,O}return Q.clearCache=()=>{a=me(),Q.resetResultsCount()},Q.resultsCount=()=>I,Q.resetResultsCount=()=>{I=0},Q}function Yt(e,...t){const a=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,y=(...p)=>{let I=0,Q=0,P,C={},A=p.pop();typeof A=="object"&&(C=A,A=p.pop()),$t(A,`createSelector expects an output function after the inputs, but received: [${typeof A}]`);const O={...a,...C},{memoize:M,memoizeOptions:h=[],argsMemoize:f=Pe,argsMemoizeOptions:b=[]}=O,w=Xe(h),R=Xe(b),g=Bt(p),T=M(function(){return I++,A.apply(null,arguments)},...w),d=f(function(){Q++;const o=Vt(g,arguments);return P=T.apply(null,o),P},...R);return Object.assign(d,{resultFunc:A,memoizedResultFunc:T,dependencies:g,dependencyRecomputations:()=>Q,resetDependencyRecomputations:()=>{Q=0},lastResult:()=>P,recomputations:()=>I,resetRecomputations:()=>{I=0},memoize:M,argsMemoize:f})};return Object.assign(y,{withTypes:()=>y}),y}var Le=Yt(Pe),Xt=Object.assign((e,t=Le)=>{Kt(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const a=Object.keys(e),y=a.map(I=>e[I]);return t(y,(...I)=>I.reduce((Q,P,C)=>(Q[a[C]]=P,Q),{}))},{withTypes:()=>Xt}),Zt=class extends Error{constructor(t){super(t[0].message);Ve(this,"issues");this.name="SchemaError",this.issues=t}},mt=(e=>(e.uninitialized="uninitialized",e.pending="pending",e.fulfilled="fulfilled",e.rejected="rejected",e))(mt||{});function et(e){return{status:e,isUninitialized:e==="uninitialized",isLoading:e==="pending",isSuccess:e==="fulfilled",isError:e==="rejected"}}var tt=ye;function bt(e,t){if(e===t||!(tt(e)&&tt(t)||Array.isArray(e)&&Array.isArray(t)))return t;const a=Object.keys(t),y=Object.keys(e);let p=a.length===y.length;const I=Array.isArray(t)?[]:{};for(const Q of a)I[Q]=bt(e[Q],t[Q]),p&&(p=e[Q]===I[Q]);return p?e:I}function ce(e){let t=0;for(const a in e)t++;return t}var nt=e=>[].concat(...e);function en(e){return new RegExp("(^|:)//").test(e)}function tn(){return typeof document>"u"?!0:document.visibilityState!=="hidden"}function Ae(e){return e!=null}function nn(){return typeof navigator>"u"||navigator.onLine===void 0?!0:navigator.onLine}var rn=e=>e.replace(/\/$/,""),sn=e=>e.replace(/^\//,"");function on(e,t){if(!e)return t;if(!t)return e;if(en(t))return t;const a=e.endsWith("/")||!t.startsWith("?")?"/":"";return e=rn(e),t=sn(t),`${e}${a}${t}`}function cn(e,t,a){return e.has(t)?e.get(t):e.set(t,a).get(t)}var rt=(...e)=>fetch(...e),un=e=>e.status>=200&&e.status<=299,an=e=>/ion\/(vnd\.api\+)?json/.test(e.get("content-type")||"");function st(e){if(!ye(e))return e;const t={...e};for(const[a,y]of Object.entries(t))y===void 0&&delete t[a];return t}function ln({baseUrl:e,prepareHeaders:t=M=>M,fetchFn:a=rt,paramsSerializer:y,isJsonContentType:p=an,jsonContentType:I="application/json",jsonReplacer:Q,timeout:P,responseHandler:C,validateStatus:A,...O}={}){return typeof fetch>"u"&&a===rt&&console.warn("Warning: `fetch` is not available. Please supply a custom `fetchFn` property to use `fetchBaseQuery` on SSR environments."),async(h,f,b)=>{const{getState:w,extra:R,endpoint:g,forced:T,type:d}=f;let n,{url:o,headers:m=new Headers(O.headers),params:v=void 0,responseHandler:S=C??"json",validateStatus:l=A??un,timeout:s=P,...r}=typeof h=="string"?{url:h}:h,i,c=f.signal;s&&(i=new AbortController,f.signal.addEventListener("abort",i.abort),c=i.signal);let u={...O,signal:c,...r};m=new Headers(st(m)),u.headers=await t(m,{getState:w,arg:h,extra:R,endpoint:g,forced:T,type:d,extraOptions:b})||m;const E=x=>typeof x=="object"&&(ye(x)||Array.isArray(x)||typeof x.toJSON=="function");if(!u.headers.has("content-type")&&E(u.body)&&u.headers.set("content-type",I),E(u.body)&&p(u.headers)&&(u.body=JSON.stringify(u.body,Q)),v){const x=~o.indexOf("?")?"&":"?",j=y?y(v):new URLSearchParams(st(v));o+=x+j}o=on(e,o);const k=new Request(o,u);n={request:new Request(o,u)};let _,q=!1,F=i&&setTimeout(()=>{q=!0,i.abort()},s);try{_=await a(k)}catch(x){return{error:{status:q?"TIMEOUT_ERROR":"FETCH_ERROR",error:String(x)},meta:n}}finally{F&&clearTimeout(F),i==null||i.signal.removeEventListener("abort",i.abort)}const z=_.clone();n.response=z;let L,B="";try{let x;if(await Promise.all([M(_,S).then(j=>L=j,j=>x=j),z.text().then(j=>B=j,()=>{})]),x)throw x}catch(x){return{error:{status:"PARSING_ERROR",originalStatus:_.status,data:B,error:String(x)},meta:n}}return l(_,L)?{data:L,meta:n}:{error:{status:_.status,data:L},meta:n}};async function M(h,f){if(typeof f=="function")return f(h);if(f==="content-type"&&(f=p(h.headers)?"json":"text"),f==="json"){const b=await h.text();return b.length?JSON.parse(b):null}return h.text()}}var it=class{constructor(e,t=void 0){this.value=e,this.meta=t}},$e=ue("__rtkq/focused"),vt=ue("__rtkq/unfocused"),Ke=ue("__rtkq/online"),St=ue("__rtkq/offline");function Me(e){return e.type==="query"}function dn(e){return e.type==="mutation"}function ke(e){return e.type==="infinitequery"}function we(e){return Me(e)||ke(e)}function He(e,t,a,y,p,I){return fn(e)?e(t,a,y,p).filter(Ae).map(_e).map(I):Array.isArray(e)?e.map(_e).map(I):[]}function fn(e){return typeof e=="function"}function _e(e){return typeof e=="string"?{type:e}:e}function pn(e,t){return e.catch(t)}var he=Symbol("forceQueryFn"),Fe=e=>typeof e[he]=="function";function yn({serializeQueryArgs:e,queryThunk:t,infiniteQueryThunk:a,mutationThunk:y,api:p,context:I}){const Q=new Map,P=new Map,{unsubscribeQueryResult:C,removeMutationResult:A,updateSubscriptionOptions:O}=p.internalActions;return{buildInitiateQuery:R,buildInitiateInfiniteQuery:g,buildInitiateMutation:T,getRunningQueryThunk:M,getRunningMutationThunk:h,getRunningQueriesThunk:f,getRunningMutationsThunk:b};function M(d,n){return o=>{var S;const m=I.endpointDefinitions[d],v=e({queryArgs:n,endpointDefinition:m,endpointName:d});return(S=Q.get(o))==null?void 0:S[v]}}function h(d,n){return o=>{var m;return(m=P.get(o))==null?void 0:m[n]}}function f(){return d=>Object.values(Q.get(d)||{}).filter(Ae)}function b(){return d=>Object.values(P.get(d)||{}).filter(Ae)}function w(d,n){const o=(m,{subscribe:v=!0,forceRefetch:S,subscriptionOptions:l,[he]:s,...r}={})=>(i,c)=>{var K;const u=e({queryArgs:m,endpointDefinition:n,endpointName:d});let E;const k={...r,type:"query",subscribe:v,forceRefetch:S,subscriptionOptions:l,endpointName:d,originalArgs:m,queryCacheKey:u,[he]:s};if(Me(n))E=t(k);else{const{direction:N,initialPageParam:W}=r;E=a({...k,direction:N,initialPageParam:W})}const D=p.endpoints[d].select(m),_=i(E),q=D(c()),{requestId:F,abort:z}=_,L=q.requestId!==F,B=(K=Q.get(i))==null?void 0:K[u],x=()=>D(c()),j=Object.assign(s?_.then(x):L&&!B?Promise.resolve(q):Promise.all([B,_]).then(x),{arg:m,requestId:F,subscriptionOptions:l,queryCacheKey:u,abort:z,async unwrap(){const N=await j;if(N.isError)throw N.error;return N.data},refetch:()=>i(o(m,{subscribe:!1,forceRefetch:!0})),unsubscribe(){v&&i(C({queryCacheKey:u,requestId:F}))},updateSubscriptionOptions(N){j.subscriptionOptions=N,i(O({endpointName:d,requestId:F,queryCacheKey:u,options:N}))}});if(!B&&!L&&!s){const N=cn(Q,i,{});N[u]=j,j.then(()=>{delete N[u],ce(N)||Q.delete(i)})}return j};return o}function R(d,n){return w(d,n)}function g(d,n){return w(d,n)}function T(d){return(n,{track:o=!0,fixedCacheKey:m}={})=>(v,S)=>{const l=y({type:"mutation",endpointName:d,originalArgs:n,track:o,fixedCacheKey:m}),s=v(l),{requestId:r,abort:i,unwrap:c}=s,u=pn(s.unwrap().then(_=>({data:_})),_=>({error:_})),E=()=>{v(A({requestId:r,fixedCacheKey:m}))},k=Object.assign(u,{arg:s.arg,requestId:r,abort:i,unwrap:c,reset:E}),D=P.get(v)||{};return P.set(v,D),D[r]=k,k.then(()=>{delete D[r],ce(D)||P.delete(v)}),m&&(D[m]=k,k.then(()=>{D[m]===k&&(delete D[m],ce(D)||P.delete(v))})),k}}}var Rt=class extends Zt{constructor(e,t,a,y){super(e),this.value=t,this.schemaName=a,this._bqMeta=y}};async function te(e,t,a,y){const p=await e["~standard"].validate(t);if(p.issues)throw new Rt(p.issues,t,a,y);return p.value}function hn(e){return e}var de=(e={})=>({...e,[yt]:!0});function gn({reducerPath:e,baseQuery:t,context:{endpointDefinitions:a},serializeQueryArgs:y,api:p,assertTagType:I,selectors:Q,onSchemaFailure:P,catchSchemaFailure:C,skipSchemaValidation:A}){const O=(r,i,c,u)=>(E,k)=>{const D=a[r],_=y({queryArgs:i,endpointDefinition:D,endpointName:r});if(E(p.internalActions.queryResultPatched({queryCacheKey:_,patches:c})),!u)return;const q=p.endpoints[r].select(i)(k()),F=He(D.providesTags,q.data,void 0,i,{},I);E(p.internalActions.updateProvidedBy([{queryCacheKey:_,providedTags:F}]))};function M(r,i,c=0){const u=[i,...r];return c&&u.length>c?u.slice(0,-1):u}function h(r,i,c=0){const u=[...r,i];return c&&u.length>c?u.slice(1):u}const f=(r,i,c,u=!0)=>(E,k)=>{const _=p.endpoints[r].select(i)(k()),q={patches:[],inversePatches:[],undo:()=>E(p.util.patchQueryData(r,i,q.inversePatches,u))};if(_.status==="uninitialized")return q;let F;if("data"in _)if(Dt(_.data)){const[z,L,B]=gt(_.data,c);q.patches.push(...L),q.inversePatches.push(...B),F=z}else F=c(_.data),q.patches.push({op:"replace",path:[],value:F}),q.inversePatches.push({op:"replace",path:[],value:_.data});return q.patches.length===0||E(p.util.patchQueryData(r,i,q.patches,u)),q},b=(r,i,c)=>u=>u(p.endpoints[r].initiate(i,{subscribe:!1,forceRefetch:!0,[he]:()=>({data:c})})),w=(r,i)=>r.query&&r[i]?r[i]:hn,R=async(r,{signal:i,abort:c,rejectWithValue:u,fulfillWithValue:E,dispatch:k,getState:D,extra:_})=>{var L,B;const q=a[r.endpointName],{metaSchema:F,skipSchemaValidation:z=A}=q;try{let x=w(q,"transformResponse");const j={signal:i,abort:c,dispatch:k,getState:D,extra:_,endpoint:r.endpointName,type:r.type,forced:r.type==="query"?g(r,D()):void 0,queryCacheKey:r.type==="query"?r.queryCacheKey:void 0},K=r.type==="query"?r[he]:void 0;let N;const W=async(H,$,V,re)=>{if($==null&&H.pages.length)return Promise.resolve({data:H});const G={queryArg:r.originalArgs,pageParam:$},se=await X(G),Y=re?M:h;return{data:{pages:Y(H.pages,se.data,V),pageParams:Y(H.pageParams,$,V)},meta:se.meta}};async function X(H){let $;const{extraOptions:V,argSchema:re,rawResponseSchema:G,responseSchema:se}=q;if(re&&!z&&(H=await te(re,H,"argSchema",{})),K?$=K():q.query?$=await t(q.query(H),j,V):$=await q.queryFn(H,j,V,ae=>t(ae,j,V)),typeof process<"u",$.error)throw new it($.error,$.meta);let{data:Y}=$;G&&!z&&(Y=await te(G,$.data,"rawResponseSchema",$.meta));let ee=await x(Y,$.meta,H);return se&&!z&&(ee=await te(se,ee,"responseSchema",$.meta)),{...$,data:ee}}if(r.type==="query"&&"infiniteQueryOptions"in q){const{infiniteQueryOptions:H}=q,{maxPages:$=1/0}=H;let V;const re={pages:[],pageParams:[]},G=(L=Q.selectQueryEntry(D(),r.queryCacheKey))==null?void 0:L.data,Y=g(r,D())&&!r.direction||!G?re:G;if("direction"in r&&r.direction&&Y.pages.length){const ee=r.direction==="backward",qe=(ee?Qt:Ue)(H,Y,r.originalArgs);V=await W(Y,qe,$,ee)}else{const{initialPageParam:ee=H.initialPageParam}=r,ae=(G==null?void 0:G.pageParams)??[],qe=ae[0]??ee,Mt=ae.length;V=await W(Y,qe,$),K&&(V={data:V.data.pages[0]});for(let Be=1;Be<Mt;Be++){const kt=Ue(H,V.data,r.originalArgs);V=await W(V.data,kt,$)}}N=V}else N=await X(r.originalArgs);return F&&!z&&N.meta&&(N.meta=await te(F,N.meta,"metaSchema",N.meta)),E(N.data,de({fulfilledTimeStamp:Date.now(),baseQueryMeta:N.meta}))}catch(x){let j=x;if(j instanceof it){let K=w(q,"transformErrorResponse");const{rawErrorResponseSchema:N,errorResponseSchema:W}=q;let{value:X,meta:H}=j;try{N&&!z&&(X=await te(N,X,"rawErrorResponseSchema",H)),F&&!z&&(H=await te(F,H,"metaSchema",H));let $=await K(X,H,r.originalArgs);return W&&!z&&($=await te(W,$,"errorResponseSchema",H)),u($,de({baseQueryMeta:H}))}catch($){j=$}}try{if(j instanceof Rt){const K={endpoint:r.endpointName,arg:r.originalArgs,type:r.type,queryCacheKey:r.type==="query"?r.queryCacheKey:void 0};(B=q.onSchemaFailure)==null||B.call(q,j,K),P==null||P(j,K);const{catchSchemaFailure:N=C}=q;if(N)return u(N(j,K),de({baseQueryMeta:j._bqMeta}))}}catch(K){j=K}throw console.error(j),j}};function g(r,i){const c=Q.selectQueryEntry(i,r.queryCacheKey),u=Q.selectConfig(i).refetchOnMountOrArgChange,E=c==null?void 0:c.fulfilledTimeStamp,k=r.forceRefetch??(r.subscribe&&u);return k?k===!0||(Number(new Date)-Number(E))/1e3>=k:!1}const T=()=>We(`${e}/executeQuery`,R,{getPendingMeta({arg:i}){const c=a[i.endpointName];return de({startedTimeStamp:Date.now(),...ke(c)?{direction:i.direction}:{}})},condition(i,{getState:c}){var z;const u=c(),E=Q.selectQueryEntry(u,i.queryCacheKey),k=E==null?void 0:E.fulfilledTimeStamp,D=i.originalArgs,_=E==null?void 0:E.originalArgs,q=a[i.endpointName],F=i.direction;return Fe(i)?!0:(E==null?void 0:E.status)==="pending"?!1:g(i,u)||Me(q)&&((z=q==null?void 0:q.forceRefetch)!=null&&z.call(q,{currentArg:D,previousArg:_,endpointState:E,state:u}))?!0:!(k&&!F)},dispatchConditionRejection:!0}),d=T(),n=T(),o=We(`${e}/executeMutation`,R,{getPendingMeta(){return de({startedTimeStamp:Date.now()})}}),m=r=>"force"in r,v=r=>"ifOlderThan"in r,S=(r,i,c)=>(u,E)=>{const k=m(c)&&c.force,D=v(c)&&c.ifOlderThan,_=(F=!0)=>{const z={forceRefetch:F,isPrefetch:!0};return p.endpoints[r].initiate(i,z)},q=p.endpoints[r].select(i)(E());if(k)u(_());else if(D){const F=q==null?void 0:q.fulfilledTimeStamp;if(!F){u(_());return}(Number(new Date)-Number(new Date(F)))/1e3>=D&&u(_())}else u(_(!1))};function l(r){return i=>{var c,u;return((u=(c=i==null?void 0:i.meta)==null?void 0:c.arg)==null?void 0:u.endpointName)===r}}function s(r,i){return{matchPending:Oe(ht(r),l(i)),matchFulfilled:Oe(ne(r),l(i)),matchRejected:Oe(xe(r),l(i))}}return{queryThunk:d,mutationThunk:o,infiniteQueryThunk:n,prefetch:S,updateQueryData:f,upsertQueryData:b,patchQueryData:O,buildMatchThunkActions:s}}function Ue(e,{pages:t,pageParams:a},y){const p=t.length-1;return e.getNextPageParam(t[p],t,a[p],a,y)}function Qt(e,{pages:t,pageParams:a},y){var p;return(p=e.getPreviousPageParam)==null?void 0:p.call(e,t[0],t,a[0],a,y)}function It(e,t,a,y){return He(a[e.meta.arg.endpointName][t],ne(e)?e.payload:void 0,Ne(e)?e.payload:void 0,e.meta.arg.originalArgs,"baseQueryMeta"in e.meta?e.meta.baseQueryMeta:void 0,y)}function be(e,t,a){const y=e[t];y&&a(y)}function ge(e){return("arg"in e?e.arg.fixedCacheKey:e.fixedCacheKey)??e.requestId}function ot(e,t,a){const y=e[ge(t)];y&&a(y)}var ve={};function mn({reducerPath:e,queryThunk:t,mutationThunk:a,serializeQueryArgs:y,context:{endpointDefinitions:p,apiUid:I,extractRehydrationInfo:Q,hasRehydrationInfo:P},assertTagType:C,config:A}){const O=ue(`${e}/resetApiState`);function M(l,s,r,i){var c;l[c=s.queryCacheKey]??(l[c]={status:"uninitialized",endpointName:s.endpointName}),be(l,s.queryCacheKey,u=>{u.status="pending",u.requestId=r&&u.requestId?u.requestId:i.requestId,s.originalArgs!==void 0&&(u.originalArgs=s.originalArgs),u.startedTimeStamp=i.startedTimeStamp;const E=p[i.arg.endpointName];ke(E)&&"direction"in s&&(u.direction=s.direction)})}function h(l,s,r,i){be(l,s.arg.queryCacheKey,c=>{if(c.requestId!==s.requestId&&!i)return;const{merge:u}=p[s.arg.endpointName];if(c.status="fulfilled",u)if(c.data!==void 0){const{fulfilledTimeStamp:E,arg:k,baseQueryMeta:D,requestId:_}=s;let q=ze(c.data,F=>u(F,r,{arg:k.originalArgs,baseQueryMeta:D,fulfilledTimeStamp:E,requestId:_}));c.data=q}else c.data=r;else c.data=p[s.arg.endpointName].structuralSharing??!0?bt(_t(c.data)?Ft(c.data):c.data,r):r;delete c.error,c.fulfilledTimeStamp=s.fulfilledTimeStamp})}const f=ie({name:`${e}/queries`,initialState:ve,reducers:{removeQueryResult:{reducer(l,{payload:{queryCacheKey:s}}){delete l[s]},prepare:le()},cacheEntriesUpserted:{reducer(l,s){for(const r of s.payload){const{queryDescription:i,value:c}=r;M(l,i,!0,{arg:i,requestId:s.meta.requestId,startedTimeStamp:s.meta.timestamp}),h(l,{arg:i,requestId:s.meta.requestId,fulfilledTimeStamp:s.meta.timestamp,baseQueryMeta:{}},c,!0)}},prepare:l=>({payload:l.map(i=>{const{endpointName:c,arg:u,value:E}=i,k=p[c];return{queryDescription:{type:"query",endpointName:c,originalArgs:i.arg,queryCacheKey:y({queryArgs:u,endpointDefinition:k,endpointName:c})},value:E}}),meta:{[yt]:!0,requestId:ft(),timestamp:Date.now()}})},queryResultPatched:{reducer(l,{payload:{queryCacheKey:s,patches:r}}){be(l,s,i=>{i.data=Je(i.data,r.concat())})},prepare:le()}},extraReducers(l){l.addCase(t.pending,(s,{meta:r,meta:{arg:i}})=>{const c=Fe(i);M(s,i,c,r)}).addCase(t.fulfilled,(s,{meta:r,payload:i})=>{const c=Fe(r.arg);h(s,r,i,c)}).addCase(t.rejected,(s,{meta:{condition:r,arg:i,requestId:c},error:u,payload:E})=>{be(s,i.queryCacheKey,k=>{if(!r){if(k.requestId!==c)return;k.status="rejected",k.error=E??u}})}).addMatcher(P,(s,r)=>{const{queries:i}=Q(r);for(const[c,u]of Object.entries(i))((u==null?void 0:u.status)==="fulfilled"||(u==null?void 0:u.status)==="rejected")&&(s[c]=u)})}}),b=ie({name:`${e}/mutations`,initialState:ve,reducers:{removeMutationResult:{reducer(l,{payload:s}){const r=ge(s);r in l&&delete l[r]},prepare:le()}},extraReducers(l){l.addCase(a.pending,(s,{meta:r,meta:{requestId:i,arg:c,startedTimeStamp:u}})=>{c.track&&(s[ge(r)]={requestId:i,status:"pending",endpointName:c.endpointName,startedTimeStamp:u})}).addCase(a.fulfilled,(s,{payload:r,meta:i})=>{i.arg.track&&ot(s,i,c=>{c.requestId===i.requestId&&(c.status="fulfilled",c.data=r,c.fulfilledTimeStamp=i.fulfilledTimeStamp)})}).addCase(a.rejected,(s,{payload:r,error:i,meta:c})=>{c.arg.track&&ot(s,c,u=>{u.requestId===c.requestId&&(u.status="rejected",u.error=r??i)})}).addMatcher(P,(s,r)=>{const{mutations:i}=Q(r);for(const[c,u]of Object.entries(i))((u==null?void 0:u.status)==="fulfilled"||(u==null?void 0:u.status)==="rejected")&&c!==(u==null?void 0:u.requestId)&&(s[c]=u)})}}),w={tags:{},keys:{}},R=ie({name:`${e}/invalidation`,initialState:w,reducers:{updateProvidedBy:{reducer(l,s){var r,i,c;for(const{queryCacheKey:u,providedTags:E}of s.payload){g(l,u);for(const{type:k,id:D}of E){const _=(i=(r=l.tags)[k]??(r[k]={}))[c=D||"__internal_without_id"]??(i[c]=[]);_.includes(u)||_.push(u)}l.keys[u]=E}},prepare:le()}},extraReducers(l){l.addCase(f.actions.removeQueryResult,(s,{payload:{queryCacheKey:r}})=>{g(s,r)}).addMatcher(P,(s,r)=>{var c,u,E;const{provided:i}=Q(r);for(const[k,D]of Object.entries(i))for(const[_,q]of Object.entries(D)){const F=(u=(c=s.tags)[k]??(c[k]={}))[E=_||"__internal_without_id"]??(u[E]=[]);for(const z of q)F.includes(z)||F.push(z)}}).addMatcher(Ie(ne(t),Ne(t)),(s,r)=>{T(s,[r])}).addMatcher(f.actions.cacheEntriesUpserted.match,(s,r)=>{const i=r.payload.map(({queryDescription:c,value:u})=>({type:"UNKNOWN",payload:u,meta:{requestStatus:"fulfilled",requestId:"UNKNOWN",arg:c}}));T(s,i)})}});function g(l,s){var i;const r=l.keys[s]??[];for(const c of r){const u=c.type,E=c.id??"__internal_without_id",k=(i=l.tags[u])==null?void 0:i[E];k&&(l.tags[u][E]=k.filter(D=>D!==s))}delete l.keys[s]}function T(l,s){const r=s.map(i=>{const c=It(i,"providesTags",p,C),{queryCacheKey:u}=i.meta.arg;return{queryCacheKey:u,providedTags:c}});R.caseReducers.updateProvidedBy(l,R.actions.updateProvidedBy(r))}const d=ie({name:`${e}/subscriptions`,initialState:ve,reducers:{updateSubscriptionOptions(l,s){},unsubscribeQueryResult(l,s){},internal_getRTKQSubscriptions(){}}}),n=ie({name:`${e}/internalSubscriptions`,initialState:ve,reducers:{subscriptionsUpdated:{reducer(l,s){return Je(l,s.payload)},prepare:le()}}}),o=ie({name:`${e}/config`,initialState:{online:nn(),focused:tn(),middlewareRegistered:!1,...A},reducers:{middlewareRegistered(l,{payload:s}){l.middlewareRegistered=l.middlewareRegistered==="conflict"||I!==s?"conflict":!0}},extraReducers:l=>{l.addCase(Ke,s=>{s.online=!0}).addCase(St,s=>{s.online=!1}).addCase($e,s=>{s.focused=!0}).addCase(vt,s=>{s.focused=!1}).addMatcher(P,s=>({...s}))}}),m=Ct({queries:f.reducer,mutations:b.reducer,provided:R.reducer,subscriptions:n.reducer,config:o.reducer}),v=(l,s)=>m(O.match(s)?void 0:l,s),S={...o.actions,...f.actions,...d.actions,...n.actions,...b.actions,...R.actions,resetApiState:O};return{reducer:v,actions:S}}var J=Symbol.for("RTKQ/skipToken"),Pt={status:"uninitialized"},ct=ze(Pt,()=>{}),ut=ze(Pt,()=>{});function bn({serializeQueryArgs:e,reducerPath:t,createSelector:a}){const y=d=>ct,p=d=>ut;return{buildQuerySelector:h,buildInfiniteQuerySelector:f,buildMutationSelector:b,selectInvalidatedBy:w,selectCachedArgsForQuery:R,selectApiState:Q,selectQueries:P,selectMutations:A,selectQueryEntry:C,selectConfig:O};function I(d){return{...d,...et(d.status)}}function Q(d){return d[t]}function P(d){var n;return(n=Q(d))==null?void 0:n.queries}function C(d,n){var o;return(o=P(d))==null?void 0:o[n]}function A(d){var n;return(n=Q(d))==null?void 0:n.mutations}function O(d){var n;return(n=Q(d))==null?void 0:n.config}function M(d,n,o){return m=>{if(m===J)return a(y,o);const v=e({queryArgs:m,endpointDefinition:n,endpointName:d});return a(l=>C(l,v)??ct,o)}}function h(d,n){return M(d,n,I)}function f(d,n){const{infiniteQueryOptions:o}=n;function m(v){const S={...v,...et(v.status)},{isLoading:l,isError:s,direction:r}=S,i=r==="forward",c=r==="backward";return{...S,hasNextPage:g(o,S.data,S.originalArgs),hasPreviousPage:T(o,S.data,S.originalArgs),isFetchingNextPage:l&&i,isFetchingPreviousPage:l&&c,isFetchNextPageError:s&&i,isFetchPreviousPageError:s&&c}}return M(d,n,m)}function b(){return d=>{let n;return typeof d=="object"?n=ge(d)??J:n=d,a(n===J?p:v=>{var S,l;return((l=(S=Q(v))==null?void 0:S.mutations)==null?void 0:l[n])??ut},I)}}function w(d,n){const o=d[t],m=new Set;for(const v of n.filter(Ae).map(_e)){const S=o.provided.tags[v.type];if(!S)continue;let l=(v.id!==void 0?S[v.id]:nt(Object.values(S)))??[];for(const s of l)m.add(s)}return nt(Array.from(m.values()).map(v=>{const S=o.queries[v];return S?[{queryCacheKey:v,endpointName:S.endpointName,originalArgs:S.originalArgs}]:[]}))}function R(d,n){return Object.values(P(d)).filter(o=>(o==null?void 0:o.endpointName)===n&&o.status!=="uninitialized").map(o=>o.originalArgs)}function g(d,n,o){return n?Ue(d,n,o)!=null:!1}function T(d,n,o){return!n||!d.getPreviousPageParam?!1:Qt(d,n,o)!=null}}var oe=WeakMap?new WeakMap:void 0,Ee=({endpointName:e,queryArgs:t})=>{let a="";const y=oe==null?void 0:oe.get(t);if(typeof y=="string")a=y;else{const p=JSON.stringify(t,(I,Q)=>(Q=typeof Q=="bigint"?{$bigint:Q.toString()}:Q,Q=ye(Q)?Object.keys(Q).sort().reduce((P,C)=>(P[C]=Q[C],P),{}):Q,Q));ye(t)&&(oe==null||oe.set(t,p)),a=p}return`${e}(${a})`};function At(...e){return function(a){const y=Pe(A=>{var O;return(O=a.extractRehydrationInfo)==null?void 0:O.call(a,A,{reducerPath:a.reducerPath??"api"})}),p={reducerPath:"api",keepUnusedDataFor:60,refetchOnMountOrArgChange:!1,refetchOnFocus:!1,refetchOnReconnect:!1,invalidationBehavior:"delayed",...a,extractRehydrationInfo:y,serializeQueryArgs(A){let O=Ee;if("serializeQueryArgs"in A.endpointDefinition){const M=A.endpointDefinition.serializeQueryArgs;O=h=>{const f=M(h);return typeof f=="string"?f:Ee({...h,queryArgs:f})}}else a.serializeQueryArgs&&(O=a.serializeQueryArgs);return O(A)},tagTypes:[...a.tagTypes||[]]},I={endpointDefinitions:{},batch(A){A()},apiUid:ft(),extractRehydrationInfo:y,hasRehydrationInfo:Pe(A=>y(A)!=null)},Q={injectEndpoints:C,enhanceEndpoints({addTagTypes:A,endpoints:O}){if(A)for(const M of A)p.tagTypes.includes(M)||p.tagTypes.push(M);if(O)for(const[M,h]of Object.entries(O))typeof h=="function"?h(I.endpointDefinitions[M]):Object.assign(I.endpointDefinitions[M]||{},h);return Q}},P=e.map(A=>A.init(Q,p,I));function C(A){const O=A.endpoints({query:M=>({...M,type:"query"}),mutation:M=>({...M,type:"mutation"}),infiniteQuery:M=>({...M,type:"infinitequery"})});for(const[M,h]of Object.entries(O)){if(A.overrideExisting!==!0&&M in I.endpointDefinitions){if(A.overrideExisting==="throw")throw new Error(pt(39));continue}I.endpointDefinitions[M]=h;for(const f of P)f.injectEndpoint(M,h)}return Q}return Q.injectEndpoints({endpoints:a.endpoints})}}function Z(e,...t){return Object.assign(e,...t)}var vn=({api:e,queryThunk:t,internalState:a})=>{const y=`${e.reducerPath}/subscriptions`;let p=null,I=null;const{updateSubscriptionOptions:Q,unsubscribeQueryResult:P}=e.internalActions,C=(f,b)=>{var R,g,T;if(Q.match(b)){const{queryCacheKey:d,requestId:n,options:o}=b.payload;return(R=f==null?void 0:f[d])!=null&&R[n]&&(f[d][n]=o),!0}if(P.match(b)){const{queryCacheKey:d,requestId:n}=b.payload;return f[d]&&delete f[d][n],!0}if(e.internalActions.removeQueryResult.match(b))return delete f[b.payload.queryCacheKey],!0;if(t.pending.match(b)){const{meta:{arg:d,requestId:n}}=b,o=f[g=d.queryCacheKey]??(f[g]={});return o[`${n}_running`]={},d.subscribe&&(o[n]=d.subscriptionOptions??o[n]??{}),!0}let w=!1;if(t.fulfilled.match(b)||t.rejected.match(b)){const d=f[b.meta.arg.queryCacheKey]||{},n=`${b.meta.requestId}_running`;w||(w=!!d[n]),delete d[n]}if(t.rejected.match(b)){const{meta:{condition:d,arg:n,requestId:o}}=b;if(d&&n.subscribe){const m=f[T=n.queryCacheKey]??(f[T]={});m[o]=n.subscriptionOptions??m[o]??{},w=!0}}return w},A=()=>a.currentSubscriptions,h={getSubscriptions:A,getSubscriptionCount:f=>{const w=A()[f]??{};return ce(w)},isRequestSubscribed:(f,b)=>{var R;const w=A();return!!((R=w==null?void 0:w[f])!=null&&R[b])}};return(f,b)=>{if(p||(p=JSON.parse(JSON.stringify(a.currentSubscriptions))),e.util.resetApiState.match(f))return p=a.currentSubscriptions={},I=null,[!0,!1];if(e.internalActions.internal_getRTKQSubscriptions.match(f))return[!1,h];const w=C(a.currentSubscriptions,f);let R=!0;if(w){I||(I=setTimeout(()=>{const d=JSON.parse(JSON.stringify(a.currentSubscriptions)),[,n]=gt(p,()=>d);b.next(e.internalActions.subscriptionsUpdated(n)),p=d,I=null},500));const g=typeof f.type=="string"&&!!f.type.startsWith(y),T=t.rejected.match(f)&&f.meta.condition&&!!f.meta.arg.subscribe;R=!g&&!T}return[R,!1]}};function Sn(e){for(const t in e)return!1;return!0}var Rn=2147483647/1e3-1,Qn=({reducerPath:e,api:t,queryThunk:a,context:y,internalState:p,selectors:{selectQueryEntry:I,selectConfig:Q}})=>{const{removeQueryResult:P,unsubscribeQueryResult:C,cacheEntriesUpserted:A}=t.internalActions,O=Ie(C.match,a.fulfilled,a.rejected,A.match);function M(R){const g=p.currentSubscriptions[R];return!!g&&!Sn(g)}const h={},f=(R,g,T)=>{const d=g.getState(),n=Q(d);if(O(R)){let o;if(A.match(R))o=R.payload.map(m=>m.queryDescription.queryCacheKey);else{const{queryCacheKey:m}=C.match(R)?R.payload:R.meta.arg;o=[m]}b(o,g,n)}if(t.util.resetApiState.match(R))for(const[o,m]of Object.entries(h))m&&clearTimeout(m),delete h[o];if(y.hasRehydrationInfo(R)){const{queries:o}=y.extractRehydrationInfo(R);b(Object.keys(o),g,n)}};function b(R,g,T){const d=g.getState();for(const n of R){const o=I(d,n);w(n,o==null?void 0:o.endpointName,g,T)}}function w(R,g,T,d){const n=y.endpointDefinitions[g],o=(n==null?void 0:n.keepUnusedDataFor)??d.keepUnusedDataFor;if(o===1/0)return;const m=Math.max(0,Math.min(o,Rn));if(!M(R)){const v=h[R];v&&clearTimeout(v),h[R]=setTimeout(()=>{M(R)||T.dispatch(P({queryCacheKey:R})),delete h[R]},m*1e3)}}return f},at=new Error("Promise never resolved before cacheEntryRemoved."),In=({api:e,reducerPath:t,context:a,queryThunk:y,mutationThunk:p,internalState:I,selectors:{selectQueryEntry:Q,selectApiState:P}})=>{const C=Ge(y),A=Ge(p),O=ne(y,p),M={};function h(g,T,d){const n=M[g];n!=null&&n.valueResolved&&(n.valueResolved({data:T,meta:d}),delete n.valueResolved)}function f(g){const T=M[g];T&&(delete M[g],T.cacheEntryRemoved())}const b=(g,T,d)=>{const n=w(g);function o(m,v,S,l){const s=Q(d,v),r=Q(T.getState(),v);!s&&r&&R(m,l,v,T,S)}if(y.pending.match(g))o(g.meta.arg.endpointName,n,g.meta.requestId,g.meta.arg.originalArgs);else if(e.internalActions.cacheEntriesUpserted.match(g))for(const{queryDescription:m,value:v}of g.payload){const{endpointName:S,originalArgs:l,queryCacheKey:s}=m;o(S,s,g.meta.requestId,l),h(s,v,{})}else if(p.pending.match(g))T.getState()[t].mutations[n]&&R(g.meta.arg.endpointName,g.meta.arg.originalArgs,n,T,g.meta.requestId);else if(O(g))h(n,g.payload,g.meta.baseQueryMeta);else if(e.internalActions.removeQueryResult.match(g)||e.internalActions.removeMutationResult.match(g))f(n);else if(e.util.resetApiState.match(g))for(const m of Object.keys(M))f(m)};function w(g){return C(g)?g.meta.arg.queryCacheKey:A(g)?g.meta.arg.fixedCacheKey??g.meta.requestId:e.internalActions.removeQueryResult.match(g)?g.payload.queryCacheKey:e.internalActions.removeMutationResult.match(g)?ge(g.payload):""}function R(g,T,d,n,o){const m=a.endpointDefinitions[g],v=m==null?void 0:m.onCacheEntryAdded;if(!v)return;const S={},l=new Promise(E=>{S.cacheEntryRemoved=E}),s=Promise.race([new Promise(E=>{S.valueResolved=E}),l.then(()=>{throw at})]);s.catch(()=>{}),M[d]=S;const r=e.endpoints[g].select(we(m)?T:d),i=n.dispatch((E,k,D)=>D),c={...n,getCacheEntry:()=>r(n.getState()),requestId:o,extra:i,updateCachedData:we(m)?E=>n.dispatch(e.util.updateQueryData(g,T,E)):void 0,cacheDataLoaded:s,cacheEntryRemoved:l},u=v(T,c);Promise.resolve(u).catch(E=>{if(E!==at)throw E})}return b},Pn=({api:e,context:{apiUid:t},reducerPath:a})=>(y,p)=>{e.util.resetApiState.match(y)&&p.dispatch(e.internalActions.middlewareRegistered(t))},An=({reducerPath:e,context:t,context:{endpointDefinitions:a},mutationThunk:y,queryThunk:p,api:I,assertTagType:Q,refetchQuery:P,internalState:C})=>{const{removeQueryResult:A}=I.internalActions,O=Ie(ne(y),Ne(y)),M=Ie(ne(y,p),xe(y,p));let h=[];const f=(R,g)=>{O(R)?w(It(R,"invalidatesTags",a,Q),g):M(R)?w([],g):I.util.invalidateTags.match(R)&&w(He(R.payload,void 0,void 0,void 0,void 0,Q),g)};function b(R){var d;const{queries:g,mutations:T}=R;for(const n of[g,T])for(const o in n)if(((d=n[o])==null?void 0:d.status)==="pending")return!0;return!1}function w(R,g){const T=g.getState(),d=T[e];if(h.push(...R),d.config.invalidationBehavior==="delayed"&&b(d))return;const n=h;if(h=[],n.length===0)return;const o=I.util.selectInvalidatedBy(T,n);t.batch(()=>{const m=Array.from(o.values());for(const{queryCacheKey:v}of m){const S=d.queries[v],l=C.currentSubscriptions[v]??{};S&&(ce(l)===0?g.dispatch(A({queryCacheKey:v})):S.status!=="uninitialized"&&g.dispatch(P(S)))}})}return f},wn=({reducerPath:e,queryThunk:t,api:a,refetchQuery:y,internalState:p})=>{const I={},Q=(h,f)=>{(a.internalActions.updateSubscriptionOptions.match(h)||a.internalActions.unsubscribeQueryResult.match(h))&&C(h.payload,f),(t.pending.match(h)||t.rejected.match(h)&&h.meta.condition)&&C(h.meta.arg,f),(t.fulfilled.match(h)||t.rejected.match(h)&&!h.meta.condition)&&P(h.meta.arg,f),a.util.resetApiState.match(h)&&O()};function P({queryCacheKey:h},f){const b=f.getState()[e],w=b.queries[h],R=p.currentSubscriptions[h];if(!w||w.status==="uninitialized")return;const{lowestPollingInterval:g,skipPollingIfUnfocused:T}=M(R);if(!Number.isFinite(g))return;const d=I[h];d!=null&&d.timeout&&(clearTimeout(d.timeout),d.timeout=void 0);const n=Date.now()+g;I[h]={nextPollTimestamp:n,pollingInterval:g,timeout:setTimeout(()=>{(b.config.focused||!T)&&f.dispatch(y(w)),P({queryCacheKey:h},f)},g)}}function C({queryCacheKey:h},f){const w=f.getState()[e].queries[h],R=p.currentSubscriptions[h];if(!w||w.status==="uninitialized")return;const{lowestPollingInterval:g}=M(R);if(!Number.isFinite(g)){A(h);return}const T=I[h],d=Date.now()+g;(!T||d<T.nextPollTimestamp)&&P({queryCacheKey:h},f)}function A(h){const f=I[h];f!=null&&f.timeout&&clearTimeout(f.timeout),delete I[h]}function O(){for(const h of Object.keys(I))A(h)}function M(h={}){let f=!1,b=Number.POSITIVE_INFINITY;for(let w in h)h[w].pollingInterval&&(b=Math.min(h[w].pollingInterval,b),f=h[w].skipPollingIfUnfocused||f);return{lowestPollingInterval:b,skipPollingIfUnfocused:f}}return Q},En=({api:e,context:t,queryThunk:a,mutationThunk:y})=>{const p=ht(a,y),I=xe(a,y),Q=ne(a,y),P={};return(A,O)=>{var M,h;if(p(A)){const{requestId:f,arg:{endpointName:b,originalArgs:w}}=A.meta,R=t.endpointDefinitions[b],g=R==null?void 0:R.onQueryStarted;if(g){const T={},d=new Promise((v,S)=>{T.resolve=v,T.reject=S});d.catch(()=>{}),P[f]=T;const n=e.endpoints[b].select(we(R)?w:f),o=O.dispatch((v,S,l)=>l),m={...O,getCacheEntry:()=>n(O.getState()),requestId:f,extra:o,updateCachedData:we(R)?v=>O.dispatch(e.util.updateQueryData(b,w,v)):void 0,queryFulfilled:d};g(w,m)}}else if(Q(A)){const{requestId:f,baseQueryMeta:b}=A.meta;(M=P[f])==null||M.resolve({data:A.payload,meta:b}),delete P[f]}else if(I(A)){const{requestId:f,rejectedWithValue:b,baseQueryMeta:w}=A.meta;(h=P[f])==null||h.reject({error:A.payload??A.error,isUnhandledError:!b,meta:w}),delete P[f]}}},Mn=({reducerPath:e,context:t,api:a,refetchQuery:y,internalState:p})=>{const{removeQueryResult:I}=a.internalActions,Q=(C,A)=>{$e.match(C)&&P(A,"refetchOnFocus"),Ke.match(C)&&P(A,"refetchOnReconnect")};function P(C,A){const O=C.getState()[e],M=O.queries,h=p.currentSubscriptions;t.batch(()=>{for(const f of Object.keys(h)){const b=M[f],w=h[f];if(!w||!b)continue;(Object.values(w).some(g=>g[A]===!0)||Object.values(w).every(g=>g[A]===void 0)&&O.config[A])&&(ce(w)===0?C.dispatch(I({queryCacheKey:f})):b.status!=="uninitialized"&&C.dispatch(y(b)))}})}return Q};function kn(e){const{reducerPath:t,queryThunk:a,api:y,context:p}=e,{apiUid:I}=p,Q={invalidateTags:ue(`${t}/invalidateTags`)},P=M=>M.type.startsWith(`${t}/`),C=[Pn,Qn,An,wn,In,En];return{middleware:M=>{let h=!1;const b={...e,internalState:{currentSubscriptions:{}},refetchQuery:O,isThisApiSliceAction:P},w=C.map(T=>T(b)),R=vn(b),g=Mn(b);return T=>d=>{if(!jt(d))return T(d);h||(h=!0,M.dispatch(y.internalActions.middlewareRegistered(I)));const n={...M,next:T},o=M.getState(),[m,v]=R(d,n,o);let S;if(m?S=T(d):S=v,M.getState()[t]&&(g(d,n,o),P(d)||p.hasRehydrationInfo(d)))for(const l of w)l(d,n,o);return S}},actions:Q};function O(M){return e.api.endpoints[M.endpointName].initiate(M.originalArgs,{subscribe:!1,forceRefetch:!0})}}var lt=Symbol(),wt=({createSelector:e=Le}={})=>({name:lt,init(t,{baseQuery:a,tagTypes:y,reducerPath:p,serializeQueryArgs:I,keepUnusedDataFor:Q,refetchOnMountOrArgChange:P,refetchOnFocus:C,refetchOnReconnect:A,invalidationBehavior:O,onSchemaFailure:M,catchSchemaFailure:h,skipSchemaValidation:f},b){Tt();const w=j=>j;Object.assign(t,{reducerPath:p,endpoints:{},internalActions:{onOnline:Ke,onOffline:St,onFocus:$e,onFocusLost:vt},util:{}});const R=bn({serializeQueryArgs:I,reducerPath:p,createSelector:e}),{selectInvalidatedBy:g,selectCachedArgsForQuery:T,buildQuerySelector:d,buildInfiniteQuerySelector:n,buildMutationSelector:o}=R;Z(t.util,{selectInvalidatedBy:g,selectCachedArgsForQuery:T});const{queryThunk:m,infiniteQueryThunk:v,mutationThunk:S,patchQueryData:l,updateQueryData:s,upsertQueryData:r,prefetch:i,buildMatchThunkActions:c}=gn({baseQuery:a,reducerPath:p,context:b,api:t,serializeQueryArgs:I,assertTagType:w,selectors:R,onSchemaFailure:M,catchSchemaFailure:h,skipSchemaValidation:f}),{reducer:u,actions:E}=mn({context:b,queryThunk:m,mutationThunk:S,serializeQueryArgs:I,reducerPath:p,assertTagType:w,config:{refetchOnFocus:C,refetchOnReconnect:A,refetchOnMountOrArgChange:P,keepUnusedDataFor:Q,reducerPath:p,invalidationBehavior:O}});Z(t.util,{patchQueryData:l,updateQueryData:s,upsertQueryData:r,prefetch:i,resetApiState:E.resetApiState,upsertQueryEntries:E.cacheEntriesUpserted}),Z(t.internalActions,E);const{middleware:k,actions:D}=kn({reducerPath:p,context:b,queryThunk:m,mutationThunk:S,infiniteQueryThunk:v,api:t,assertTagType:w,selectors:R});Z(t.util,D),Z(t,{reducer:u,middleware:k});const{buildInitiateQuery:_,buildInitiateInfiniteQuery:q,buildInitiateMutation:F,getRunningMutationThunk:z,getRunningMutationsThunk:L,getRunningQueriesThunk:B,getRunningQueryThunk:x}=yn({queryThunk:m,mutationThunk:S,infiniteQueryThunk:v,api:t,serializeQueryArgs:I,context:b});return Z(t.util,{getRunningMutationThunk:z,getRunningMutationsThunk:L,getRunningQueryThunk:x,getRunningQueriesThunk:B}),{name:lt,injectEndpoint(j,K){var X;const W=(X=t.endpoints)[j]??(X[j]={});Me(K)&&Z(W,{name:j,select:d(j,K),initiate:_(j,K)},c(m,j)),dn(K)&&Z(W,{name:j,select:o(),initiate:F(j)},c(S,j)),ke(K)&&Z(W,{name:j,select:n(j,K),initiate:q(j,K)},c(m,j))}}}});wt();function Se(e){return e.replace(e[0],e[0].toUpperCase())}function qn(e){return e.type==="query"}function On(e){return e.type==="mutation"}function Et(e){return e.type==="infinitequery"}function fe(e,...t){return Object.assign(e,...t)}var Te=Symbol();function Ce(e,t,a,y){const p=U.useMemo(()=>({queryArgs:e,serialized:typeof e=="object"?t({queryArgs:e,endpointDefinition:a,endpointName:y}):e}),[e,t,a,y]),I=U.useRef(p);return U.useEffect(()=>{I.current.serialized!==p.serialized&&(I.current=p)},[p]),I.current.serialized===p.serialized?I.current.queryArgs:e}function Re(e){const t=U.useRef(e);return U.useEffect(()=>{pe(t.current,e)||(t.current=e)},[e]),pe(t.current,e)?t.current:e}var Tn=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Cn=Tn(),Dn=()=>typeof navigator<"u"&&navigator.product==="ReactNative",jn=Dn(),_n=()=>Cn||jn?U.useLayoutEffect:U.useEffect,Fn=_n(),dt=e=>e.isUninitialized?{...e,isUninitialized:!1,isFetching:!0,isLoading:e.data===void 0,status:mt.pending}:e;function De(e,...t){const a={};return t.forEach(y=>{a[y]=e[y]}),a}var je=["data","status","isLoading","isSuccess","isError","error"];function Un({api:e,moduleOptions:{batch:t,hooks:{useDispatch:a,useSelector:y,useStore:p},unstable__sideEffectsInRender:I,createSelector:Q},serializeQueryArgs:P,context:C}){const A=I?n=>n():U.useEffect;return{buildQueryHooks:g,buildInfiniteQueryHooks:T,buildMutationHook:d,usePrefetch:h};function O(n,o,m){if(o!=null&&o.endpointName&&n.isUninitialized){const{endpointName:i}=o,c=C.endpointDefinitions[i];m!==J&&P({queryArgs:o.originalArgs,endpointDefinition:c,endpointName:i})===P({queryArgs:m,endpointDefinition:c,endpointName:i})&&(o=void 0)}let v=n.isSuccess?n.data:o==null?void 0:o.data;v===void 0&&(v=n.data);const S=v!==void 0,l=n.isLoading,s=(!o||o.isLoading||o.isUninitialized)&&!S&&l,r=n.isSuccess||S&&(l&&!(o!=null&&o.isError)||n.isUninitialized);return{...n,data:v,currentData:n.data,isFetching:l,isLoading:s,isSuccess:r}}function M(n,o,m){if(o!=null&&o.endpointName&&n.isUninitialized){const{endpointName:i}=o,c=C.endpointDefinitions[i];m!==J&&P({queryArgs:o.originalArgs,endpointDefinition:c,endpointName:i})===P({queryArgs:m,endpointDefinition:c,endpointName:i})&&(o=void 0)}let v=n.isSuccess?n.data:o==null?void 0:o.data;v===void 0&&(v=n.data);const S=v!==void 0,l=n.isLoading,s=(!o||o.isLoading||o.isUninitialized)&&!S&&l,r=n.isSuccess||l&&S;return{...n,data:v,currentData:n.data,isFetching:l,isLoading:s,isSuccess:r}}function h(n,o){const m=a(),v=Re(o);return U.useCallback((S,l)=>m(e.util.prefetch(n,S,{...v,...l})),[n,m,v])}function f(n,o,{refetchOnReconnect:m,refetchOnFocus:v,refetchOnMountOrArgChange:S,skip:l=!1,pollingInterval:s=0,skipPollingIfUnfocused:r=!1,...i}={}){const{initiate:c}=e.endpoints[n],u=a(),E=U.useRef(void 0);if(!E.current){const j=u(e.internalActions.internal_getRTKQSubscriptions());E.current=j}const k=Ce(l?J:o,Ee,C.endpointDefinitions[n],n),D=Re({refetchOnReconnect:m,refetchOnFocus:v,pollingInterval:s,skipPollingIfUnfocused:r}),_=i.initialPageParam,q=Re(_),F=U.useRef(void 0);let{queryCacheKey:z,requestId:L}=F.current||{},B=!1;z&&L&&(B=E.current.isRequestSubscribed(z,L));const x=!B&&F.current!==void 0;return A(()=>{x&&(F.current=void 0)},[x]),A(()=>{var N;const j=F.current;if(k===J){j==null||j.unsubscribe(),F.current=void 0;return}const K=(N=F.current)==null?void 0:N.subscriptionOptions;if(!j||j.arg!==k){j==null||j.unsubscribe();const W=u(c(k,{subscriptionOptions:D,forceRefetch:S,...Et(C.endpointDefinitions[n])?{initialPageParam:q}:{}}));F.current=W}else D!==K&&j.updateSubscriptionOptions(D)},[u,c,S,k,D,x,q,n]),[F,u,c,D]}function b(n,o){return(v,{skip:S=!1,selectFromResult:l}={})=>{const{select:s}=e.endpoints[n],r=Ce(S?J:v,P,C.endpointDefinitions[n],n),i=U.useRef(void 0),c=U.useMemo(()=>Q([s(r),(_,q)=>q,_=>r],o,{memoizeOptions:{resultEqualityCheck:pe}}),[s,r]),u=U.useMemo(()=>l?Q([c],l,{devModeChecks:{identityFunctionCheck:"never"}}):c,[c,l]),E=y(_=>u(_,i.current),pe),k=p(),D=c(k.getState(),i.current);return Fn(()=>{i.current=D},[D]),E}}function w(n){U.useEffect(()=>()=>{var o,m;(m=(o=n.current)==null?void 0:o.unsubscribe)==null||m.call(o),n.current=void 0},[n])}function R(n){if(!n.current)throw new Error(pt(38));return n.current.refetch()}function g(n){const o=(S,l={})=>{const[s]=f(n,S,l);return w(s),U.useMemo(()=>({refetch:()=>R(s)}),[s])},m=({refetchOnReconnect:S,refetchOnFocus:l,pollingInterval:s=0,skipPollingIfUnfocused:r=!1}={})=>{const{initiate:i}=e.endpoints[n],c=a(),[u,E]=U.useState(Te),k=U.useRef(void 0),D=Re({refetchOnReconnect:S,refetchOnFocus:l,pollingInterval:s,skipPollingIfUnfocused:r});A(()=>{var L,B;const z=(L=k.current)==null?void 0:L.subscriptionOptions;D!==z&&((B=k.current)==null||B.updateSubscriptionOptions(D))},[D]);const _=U.useRef(D);A(()=>{_.current=D},[D]);const q=U.useCallback(function(z,L=!1){let B;return t(()=>{var x;(x=k.current)==null||x.unsubscribe(),k.current=B=c(i(z,{subscriptionOptions:_.current,forceRefetch:!L})),E(z)}),B},[c,i]),F=U.useCallback(()=>{var z,L;(z=k.current)!=null&&z.queryCacheKey&&c(e.internalActions.removeQueryResult({queryCacheKey:(L=k.current)==null?void 0:L.queryCacheKey}))},[c]);return U.useEffect(()=>()=>{var z;(z=k==null?void 0:k.current)==null||z.unsubscribe()},[]),U.useEffect(()=>{u!==Te&&!k.current&&q(u,!0)},[u,q]),U.useMemo(()=>[q,u,{reset:F}],[q,u,F])},v=b(n,O);return{useQueryState:v,useQuerySubscription:o,useLazyQuerySubscription:m,useLazyQuery(S){const[l,s,{reset:r}]=m(S),i=v(s,{...S,skip:s===Te}),c=U.useMemo(()=>({lastArg:s}),[s]);return U.useMemo(()=>[l,{...i,reset:r},c],[l,i,r,c])},useQuery(S,l){const s=o(S,l),r=v(S,{selectFromResult:S===J||l!=null&&l.skip?void 0:dt,...l}),i=De(r,...je);return U.useDebugValue(i),U.useMemo(()=>({...r,...s}),[r,s])}}}function T(n){const o=(v,S={})=>{const[l,s,r,i]=f(n,v,S),c=U.useRef(i);A(()=>{c.current=i},[i]);const u=U.useCallback(function(D,_){let q;return t(()=>{var F;(F=l.current)==null||F.unsubscribe(),l.current=q=s(r(D,{subscriptionOptions:c.current,direction:_}))}),q},[l,s,r]);w(l);const E=Ce(S.skip?J:v,Ee,C.endpointDefinitions[n],n),k=U.useCallback(()=>R(l),[l]);return U.useMemo(()=>({trigger:u,refetch:k,fetchNextPage:()=>u(E,"forward"),fetchPreviousPage:()=>u(E,"backward")}),[k,u,E])},m=b(n,M);return{useInfiniteQueryState:m,useInfiniteQuerySubscription:o,useInfiniteQuery(v,S){const{refetch:l,fetchNextPage:s,fetchPreviousPage:r}=o(v,S),i=m(v,{selectFromResult:v===J||S!=null&&S.skip?void 0:dt,...S}),c=De(i,...je,"hasNextPage","hasPreviousPage");return U.useDebugValue(c),U.useMemo(()=>({...i,fetchNextPage:s,fetchPreviousPage:r,refetch:l}),[i,s,r,l])}}}function d(n){return({selectFromResult:o,fixedCacheKey:m}={})=>{const{select:v,initiate:S}=e.endpoints[n],l=a(),[s,r]=U.useState();U.useEffect(()=>()=>{s!=null&&s.arg.fixedCacheKey||s==null||s.reset()},[s]);const i=U.useCallback(function(z){const L=l(S(z,{fixedCacheKey:m}));return r(L),L},[l,S,m]),{requestId:c}=s||{},u=U.useMemo(()=>v({fixedCacheKey:m,requestId:s==null?void 0:s.requestId}),[m,s,v]),E=U.useMemo(()=>o?Q([u],o):u,[o,u]),k=y(E,pe),D=m==null?s==null?void 0:s.arg.originalArgs:void 0,_=U.useCallback(()=>{t(()=>{s&&r(void 0),m&&l(e.internalActions.removeMutationResult({requestId:c,fixedCacheKey:m}))})},[l,m,s,c]),q=De(k,...je,"endpointName");U.useDebugValue(q);const F=U.useMemo(()=>({...k,originalArgs:D,reset:_}),[k,D,_]);return U.useMemo(()=>[i,F],[i,F])}}}var zn=Symbol(),Nn=({batch:e=Ut,hooks:t={useDispatch:xt,useSelector:Nt,useStore:zt},createSelector:a=Le,unstable__sideEffectsInRender:y=!1,...p}={})=>({name:zn,init(I,{serializeQueryArgs:Q},P){const C=I,{buildQueryHooks:A,buildInfiniteQueryHooks:O,buildMutationHook:M,usePrefetch:h}=Un({api:I,moduleOptions:{batch:e,hooks:t,unstable__sideEffectsInRender:y,createSelector:a},serializeQueryArgs:Q,context:P});return fe(C,{usePrefetch:h}),fe(P,{batch:e}),{injectEndpoint(f,b){if(qn(b)){const{useQuery:w,useLazyQuery:R,useLazyQuerySubscription:g,useQueryState:T,useQuerySubscription:d}=A(f);fe(C.endpoints[f],{useQuery:w,useLazyQuery:R,useLazyQuerySubscription:g,useQueryState:T,useQuerySubscription:d}),I[`use${Se(f)}Query`]=w,I[`useLazy${Se(f)}Query`]=R}if(On(b)){const w=M(f);fe(C.endpoints[f],{useMutation:w}),I[`use${Se(f)}Mutation`]=w}else if(Et(b)){const{useInfiniteQuery:w,useInfiniteQuerySubscription:R,useInfiniteQueryState:g}=O(f);fe(C.endpoints[f],{useInfiniteQuery:w,useInfiniteQuerySubscription:R,useInfiniteQueryState:g}),I[`use${Se(f)}InfiniteQuery`]=w}}}}}),xn=At(wt(),Nn());const Wn="http://127.0.0.1:8000",Ln="http://127.0.0.1:8000/api/v1",Qe=ln({baseUrl:Ln,prepareHeaders:(e,t)=>{var y,p;const a=(p=(y=t.getState().auth)==null?void 0:y.tokens)==null?void 0:p.access_token;return a&&e.set("Authorization",`Bearer ${a}`),e}}),$n=async(e,t,a)=>{const y=await Qe({url:"/token/verify/",method:"POST",body:{token:e}},t,a);return!(y.error&&y.error.status===401)},Kn=async(e,t,a)=>{var C,A,O,M,h,f;typeof e=="string"&&(e={url:e});const y=t.getState();let p=(A=(C=y==null?void 0:y.auth)==null?void 0:C.tokens)==null?void 0:A.access_token;const I=(M=(O=y==null?void 0:y.auth)==null?void 0:O.tokens)==null?void 0:M.refresh_token;p&&(await $n(p,t,a)||(console.warn("Access token invalid. Will attempt refresh..."),p=void 0));let Q={...e.headers??{}};p&&(Q.Authorization=`Bearer ${p}`);let P=await Qe({...e,headers:Q},t,a);if(((h=P==null?void 0:P.error)==null?void 0:h.status)===401&&I){console.warn("Access token expired. Trying to refresh...");const b=await Qe({url:"/token/refresh/",method:"POST",body:{refresh:I}},t,a);b!=null&&b.data&&((f=b.data)!=null&&f.access)?(p=b.data.access,t.dispatch(Lt({admin:y.auth.admin,tokens:{access_token:p,refresh_token:I}})),Q.Authorization=`Bearer ${p}`,P=await Qe({...e,headers:Q},t,a)):(console.error("Refresh token expired or invalid. Logging out..."),localStorage.removeItem("auth"),t.dispatch(Ye()))}else I||(console.warn("No refresh token found. Logging out..."),localStorage.removeItem("auth"),t.dispatch(Ye()));return P},Jn=xn({reducerPath:"api",baseQuery:Kn,endpoints:()=>({})});export{Wn as M,Jn as a};
